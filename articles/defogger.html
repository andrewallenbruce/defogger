<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="defogger">
<title>Defogging Transparency in Coverage Files • defogger</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.2/font.css" rel="stylesheet">
<link href="../deps/Fira_Code-0.4.2/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Defogging Transparency in Coverage Files">
<meta property="og:description" content="defogger">
<meta property="og:image" content="https://andrewallenbruce.github.io/defogger/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-secondary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">defogger</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/defogger.html">Overview</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/tic-overview.html">Transparency in Coverage Guide</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
    
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">
    <span class="far fa far fa-newspaper fa-lg"></span>
     
    
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/andrewallenbruce/defogger">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="http://twitter.com/aabrucehimni">
    <span class="fab fa fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.linkedin.com/in/andybruce1/">
    <span class="fas fa fas fa-linkedin fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Defogging Transparency in Coverage Files</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/andrewallenbruce/defogger/blob/HEAD/vignettes/defogger.Rmd" class="external-link"><code>vignettes/defogger.Rmd</code></a></small>
      <div class="d-none name"><code>defogger.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in library(tidyverse): there is no package called 'tidyverse'</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in library(kableExtra): there is no package called 'kableExtra'</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/andrewallenbruce/defogger" class="external-link">defogger</a></span><span class="op">)</span></span></code></pre></div>
<p>The path to analyzing a health insurance company’s Transparency in Coverage (TiC) files begins at their public TiC site. Centene Corporation’s is located <a href="https://www.centene.com/price-transparency-files.html" class="external-link">here</a>. To begin, you simply have to right-click and copy one of the links’ URL addresses: <br></p>
<p><a href="https://www.centene.com/price-transparency-files.html" class="external-link"><img src="images/brave_8N1X1S0DdT.png" alt="Centene’s Transparency in Coverage Site"></a></p>
<p><br> Then assign it to an object in R:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">centene_url</span> <span class="op">&lt;-</span> <span class="st">"https://www.centene.com/content/dam/centene/Centene%20Corporate/json/DOCUMENT/2022-06-29_ambetter_index.json"</span></span></code></pre></div>
<p><br></p>
<blockquote>
<p>It’s important to note that this is a <strong>Table of Contents (TOC) file</strong>. TOC files are what you’ll start with as they contain top-level information such as each plan’s name, id, market (individual or group), and the URL address of each plan’s in-network negotiated rates and out-of-network allowable amounts.</p>
</blockquote>
<p><br></p>
<p>You can retrieve and parse a TOC file with the <code><a href="../reference/defog_toc.html">defog_toc()</a></code> function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">centene_toc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/defog_toc.html">defog_toc</a></span><span class="op">(</span><span class="va">centene_url</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<p>This returns a data frame containing 2,598 rows, so, for simplicity’s sake, I’ve limited it to the first 10 rows:</p>
<p><br></p>
<pre><code><span><span class="co">#&gt; Error in loadNamespace(x): there is no package called 'kableExtra'</span></span></code></pre>
<p><br><br></p>
<div class="section level2">
<h2 id="out-of-network-files">Out-of-Network Files<a class="anchor" aria-label="anchor" href="#out-of-network-files"></a>
</h2>
<p><br></p>
<p>Next we’ll download one of the <em>out-of-network (OON)</em> files, also known as “allowed amounts” files. From the results above, we can filter the <code>rate_type</code> column to <code>out_of_network</code> and make sure to remove duplicate URLs with {dplyr}’s <code>distinct()</code> function:</p>
<p><br></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">centene_oon_CA</span> <span class="op">&lt;-</span> <span class="va">centene_toc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rate_type</span> <span class="op">==</span> <span class="st">"out_of_network"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html" class="external-link">deframe</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] "http://centene.com/content/dam/centene/Centene%20Corporate/json/DOCUMENT/2022-06-29_centene-management-company-llc_ambetter-ca_allowed-amounts.json"</span></span></code></pre>
<p><br></p>
<p>Next, plug the URL object into the <code><a href="../reference/defog_oon.html">defog_oon()</a></code> function and retrieve the file:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">centene_oon_CA_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/defog_oon.html">defog_oon</a></span><span class="op">(</span><span class="va">centene_oon_CA</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Error in loadNamespace(x): there is no package called 'kableExtra'</span></span></code></pre>
<p><br></p>
<p>Again, I’ve limited the output to the first ten rows for demonstration purposes, but this gives you a good idea of what an OON file contains. Next, we’ll retrieve an in-network file.</p>
<p><br><br></p>
</div>
<div class="section level2">
<h2 id="in-network-files">In-Network Files<a class="anchor" aria-label="anchor" href="#in-network-files"></a>
</h2>
<p><br></p>
<p>The workflow for an <em>in-network (INN)</em> file is much the same, though the output is different, thus the need for a different function. This time, we filter the <code>rate_type</code> column to <code>in_network</code>, again making sure to remove duplicate URLs:</p>
<p><br></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">centene_inn_CA</span> <span class="op">&lt;-</span> <span class="va">centene_toc</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">rate_type</span> <span class="op">==</span> <span class="st">"in_network"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/enframe.html" class="external-link">deframe</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] "http://centene.com/content/dam/centene/Centene%20Corporate/json/DOCUMENT/2022-06-29_centene-management-company-llc_ambetter-ca_in-network.json"</span></span></code></pre>
<p><br></p>
<p>And plug the URL object into the <code><a href="../reference/defog_inn.html">defog_inn()</a></code> function:</p>
<p><br></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">centene_inn_CA_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/defog_inn.html">defog_inn</a></span><span class="op">(</span><span class="va">centene_inn_CA</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Error in loadNamespace(x): there is no package called 'kableExtra'</span></span></code></pre>
<p><br></p>
<p>The output shows the first ten rows out of 141,580 total.</p>
<p>This is, without a doubt, an embarassment of riches for those of us in healthcare data analytics. However, there are some absent data points that would enable us to expand our analysis even further. This is where the NPPES NPI Registry API comes in handy.</p>
<p><br><br></p>
</div>
<div class="section level2">
<h2 id="provider-data-the-nppes">Provider Data &amp; the NPPES<a class="anchor" aria-label="anchor" href="#provider-data-the-nppes"></a>
</h2>
<p>Using the <a href="https://npiregistry.cms.hhs.gov/search" class="external-link">NPPES Registry Search</a>, we can retrieve data such as a provider’s taxonomy, credentials, gender, NPI type, payer-specific identifiers, etc. First, we need to isolate the distinct NPIs from both the OON and INN results above. We have five distinct NPIs from the out-of-network file:</p>
<p><br></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># OON file</span></span>
<span><span class="va">centene_oon_npi</span> <span class="op">&lt;-</span> <span class="va">centene_oon_CA_file</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">npi</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span>use.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; [1] "1104868124" "1366964330" "1760041487" "1902967557" "1710065933"</span></span></code></pre>
<p><br></p>
<p>And 10 distinct NPIs from the in-network file:</p>
<p><br></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># INN file</span></span>
<span><span class="va">centene_inn_npi</span> <span class="op">&lt;-</span> <span class="va">centene_inn_CA_file</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">npi</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span>use.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;  [1] "1063050748" "1114499340" "1801314687" "1477217966" "1730531328"</span></span>
<span><span class="co">#&gt;  [6] "1578813234" "1912103383" "1356852495" "1043304702" "1730294547"</span></span></code></pre>
<p><br></p>
<p>Next, we pipe them both into {defogger}’s NPPES search function, <code><a href="../reference/defog_npi.html">defog_npi()</a></code>, via {purrr}’s <code>map_dfr()</code>:</p>
<p><br></p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># OON file NPIs</span></span>
<span><span class="va">centene_oon_npi_resp</span> <span class="op">&lt;-</span> <span class="va">centene_oon_npi</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="va">defog_npi</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 4</span></span></span>
<span><span class="co">#&gt;   search     datetime            outcome data_lists   </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1104868124 2022-08-28 <span style="color: #949494;">00:55:12</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1366964330 2022-08-28 <span style="color: #949494;">00:55:14</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 1760041487 2022-08-28 <span style="color: #949494;">00:55:17</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 1902967557 2022-08-28 <span style="color: #949494;">00:55:19</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 1710065933 2022-08-28 <span style="color: #949494;">00:55:22</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># INN file NPIs</span></span>
<span><span class="va">centene_inn_npi_resp</span> <span class="op">&lt;-</span> <span class="va">centene_inn_npi</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="va">defog_npi</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 4</span></span></span>
<span><span class="co">#&gt;    search     datetime            outcome data_lists   </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>       </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1063050748 2022-08-28 <span style="color: #949494;">00:55:24</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1114499340 2022-08-28 <span style="color: #949494;">00:55:26</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1801314687 2022-08-28 <span style="color: #949494;">00:55:29</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1477217966 2022-08-28 <span style="color: #949494;">00:55:31</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1730531328 2022-08-28 <span style="color: #949494;">00:55:34</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1578813234 2022-08-28 <span style="color: #949494;">00:55:36</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1912103383 2022-08-28 <span style="color: #949494;">00:55:39</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1356852495 2022-08-28 <span style="color: #949494;">00:55:41</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1043304702 2022-08-28 <span style="color: #949494;">00:55:43</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1730294547 2022-08-28 <span style="color: #949494;">00:55:46</span> results <span style="color: #949494;">&lt;df [1 × 11]&gt;</span></span></span></code></pre>
<p><br></p>
<p>This gives us two responses from the NPPES API, which we can unpack with the <code><a href="../reference/defog_npi_wide.html">defog_npi_wide()</a></code> function:</p>
<p><br></p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># OON file response</span></span>
<span><span class="va">centene_oon_npi_result</span> <span class="op">&lt;-</span> <span class="va">centene_oon_npi_resp</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="va">search</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="va">defog_npi_wide</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Error in loadNamespace(x): there is no package called 'kableExtra'</span></span></code></pre>
<p><br></p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># INN file response</span></span>
<span><span class="va">centene_inn_npi_result</span> <span class="op">&lt;-</span> <span class="va">centene_inn_npi_resp</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_split.html" class="external-link">group_split</a></span><span class="op">(</span><span class="va">search</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="va">defog_npi_wide</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Error in loadNamespace(x): there is no package called 'kableExtra'</span></span></code></pre>
<p><br></p>
<p>We can then join the two pairs of data frames for further analysis:</p>
<p><br></p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># OON join</span></span>
<span><span class="va">centene_oon_npi_join</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span></span>
<span>  <span class="va">centene_oon_CA_file</span>, </span>
<span>  <span class="va">centene_oon_npi_result</span>, </span>
<span>  by <span class="op">=</span> <span class="st">"npi"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1,320 × 68</span></span></span>
<span><span class="co">#&gt;    name    billi…¹ billi…² billi…³ descr…⁴ ein   servi…⁵ billi…⁶ allow…⁷ bille…⁸</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ANES U… CPT     2022    00813   ANESTH… 3301… 24      profes…   <span style="text-decoration: underline;">1</span>568     <span style="text-decoration: underline;">4</span>655</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ANES U… CPT     2022    00813   ANESTH… 3301… 24      profes…   <span style="text-decoration: underline;">1</span>568     <span style="text-decoration: underline;">4</span>655</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> NFCT D… HCPCS   2022    0202U   NFCT D… 8220… 20      profes…   <span style="text-decoration: underline;">9</span>586.   <span style="text-decoration: underline;">33</span>925</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> NFCT D… HCPCS   2022    0202U   NFCT D… 8220… 20      profes…   <span style="text-decoration: underline;">9</span>586.   <span style="text-decoration: underline;">33</span>925</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ANTIBO… HCPCS   2022    0224U   ANTB S… 4641… 11      profes…   <span style="text-decoration: underline;">1</span>475.   <span style="text-decoration: underline;">10</span>500</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ANTIBO… HCPCS   2022    0224U   ANTB S… 4641… 11      profes…   <span style="text-decoration: underline;">1</span>475.   <span style="text-decoration: underline;">10</span>500</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ANTIBO… HCPCS   2022    0224U   ANTB S… 4641… 11      profes…   <span style="text-decoration: underline;">1</span>475.   <span style="text-decoration: underline;">10</span>500</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ANTIBO… HCPCS   2022    0224U   ANTB S… 4641… 11      profes…   <span style="text-decoration: underline;">1</span>475.   <span style="text-decoration: underline;">10</span>500</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ANTIBO… HCPCS   2022    0224U   ANTB S… 4641… 11      profes…   <span style="text-decoration: underline;">1</span>475.   <span style="text-decoration: underline;">10</span>500</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ANTIBO… HCPCS   2022    0224U   ANTB S… 4641… 11      profes…   <span style="text-decoration: underline;">1</span>475.   <span style="text-decoration: underline;">10</span>500</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 1,310 more rows, 58 more variables: npi &lt;chr&gt;, prov_type &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   id &lt;chr&gt;, first_name &lt;chr&gt;, last_name &lt;chr&gt;, credential &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   sole_proprietor &lt;chr&gt;, gender &lt;chr&gt;, enumeration_date &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   last_updated &lt;chr&gt;, status &lt;chr&gt;, name_prefix &lt;chr&gt;, country_abb &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   country_name &lt;chr&gt;, address_purpose &lt;chr&gt;, address_type &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   address_1 &lt;chr&gt;, address_2 &lt;chr&gt;, city &lt;chr&gt;, state_abb &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   postal_code &lt;chr&gt;, telephone_number &lt;chr&gt;, fax_number &lt;chr&gt;, …</span></span></span></code></pre>
<p><br></p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># INN join</span></span>
<span><span class="va">centene_inn_npi_join</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span></span>
<span>  <span class="va">centene_inn_CA_file</span>, </span>
<span>  <span class="va">centene_inn_npi_result</span>, </span>
<span>  by <span class="op">=</span> <span class="st">"npi"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 42 × 68</span></span></span>
<span><span class="co">#&gt;    negot…¹ name  billi…² billi…³ billi…⁴ descr…⁵ negot…⁶ negot…⁷ expir…⁸ servi…⁹</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> ffs     STRA… CPT     2022    29240   STRAPP… negoti…    27.0 9999-1… 11     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> ffs     STRA… CPT     2022    29240   STRAPP… negoti…    27.0 9999-1… 11     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> ffs     STRA… CPT     2022    29240   STRAPP… negoti…    27.0 9999-1… 11     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> ffs     STRA… CPT     2022    29240   STRAPP… negoti…    27.0 9999-1… 11     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> ffs     STRA… CPT     2022    29240   STRAPP… negoti…    27.0 9999-1… 11     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> ffs     STRA… CPT     2022    29240   STRAPP… negoti…    27.0 9999-1… 11     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> ffs     STRA… CPT     2022    29240   STRAPP… negoti…    27.0 9999-1… 11     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> ffs     STRA… CPT     2022    29240   STRAPP… negoti…    27.0 9999-1… 11     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> ffs     STRA… CPT     2022    29240   STRAPP… negoti…    27.0 9999-1… 11     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> ffs     STRA… CPT     2022    29240   STRAPP… negoti…    27.0 9999-1… 11     </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 32 more rows, 58 more variables: billing_class &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   additional_information &lt;chr&gt;, billing_code_modifier &lt;chr&gt;, npi &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ein &lt;chr&gt;, prov_type &lt;chr&gt;, id &lt;chr&gt;, first_name &lt;chr&gt;, last_name &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   middle_name &lt;chr&gt;, credential &lt;chr&gt;, sole_proprietor &lt;chr&gt;, gender &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   enumeration_date &lt;chr&gt;, last_updated &lt;chr&gt;, status &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   name_prefix &lt;chr&gt;, country_abb &lt;chr&gt;, country_name &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   address_purpose &lt;chr&gt;, address_type &lt;chr&gt;, address_1 &lt;chr&gt;, city &lt;chr&gt;, …</span></span></span></code></pre>
<p><br></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Andrew Bruce.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
